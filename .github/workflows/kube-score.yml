name: Kube-score Analysis
# ðŸš¨ IMPORTANT: Change 'path/to/your/manifest.yaml' below to your actual file path!
on:
  # Triggers on push and pull requests to the main branch
  push:
    branches: [create-github-actions]
  # This enables manual triggering via the GitHub Actions UI
  workflow_dispatch:
jobs:
  kube_score:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
      - name: Run Kube-score v1.20.0 with Docker
        run: "# The Docker image is pinned to a specific version for stability.\nDOCKER_IMAGE=\"kubescore/kubescore:v1.20.0\"\n\n# ðŸš¨ CUSTOMIZE THIS PATH ðŸš¨\n# This must be the path to your manifest file relative to the repository root.\nMANIFEST_PATH=\"kubernetes/opentelemetry-demo.yml\" \n\necho \"Scanning manifest: ${MANIFEST_PATH}\"\n\n# The -v mounts your entire repo into the container at /manifests\ndocker run \\\n  -v ${{ github.workspace }}:/manifests \\\n  ${DOCKER_IMAGE} \\\n  score /manifests/${MANIFEST_PATH} \\\n  --output-format human \\\n  --ignore-container-security-context\n"
